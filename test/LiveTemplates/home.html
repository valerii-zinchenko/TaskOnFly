<!DOCTYPE html>
<html>
<head>
    <!--
        TaskOnFly. Manage your tasks and task lists on the fly.
         Copyright (C) 2014  Valerii Zinchenko

         This file is part of TaskOnFly.

         TaskOnFly is free software: you can redistribute it and/or modify
         it under the terms of the GNU General Public License as published by
         the Free Software Foundation, either version 3 of the License, or
         (at your option) any later version.

         TaskOnFly is distributed in the hope that it will be useful,
         but WITHOUT ANY WARRANTY; without even the implied warranty of
         MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
         GNU General Public License for more details.

         You should have received a copy of the GNU General Public License
         along with TaskOnFly.  If not, see <http://www.gnu.org/licenses/>.


         All source files are available at: http://github.com/valerii-zinchenko/TaskOnFly
    -->

    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TaskMe</title>

    <script src="../../html/js/lib/jquery-2.1.1.js"></script>
    <script src="../../html/js/lib/jquery.mobile-1.4.3.js"></script>
    <link rel="stylesheet" href="../../html/css/jquery.mobile-1.4.3.css">
    <link rel="stylesheet" href="../../html/css/main.css">
    <link rel="stylesheet" href="../../html/css/jquery.mobile-custom.css">
</head>
<body>
    <div data-role="page" id="home">
        <div data-role="header" data-position="fixed">
            <a href="#" id="prevList" data-role="button" data-icon="carat-l">Previous list</a>
            <h1>Home</h1>
        </div>
        <div id="content" class="ui-content">
            <table class="full fast-item">
                <tbody>
                <tr>
                    <td>
                        <input id="fastItem" type="text" placeholder="Fast task">
                    </td>
                    <td class="select-priority">
                        <div id="priority" class="full-width ui-controlgroup-grid-b" data-role="controlgroup" data-type="horizontal" data-mini="true">
                            <label for="low" class="low ui-icon-arrow-d ui-btn-icon-notext">Low</label>
                            <input id="low" type="radio" name="priority" value="0">
                            <label for="normal" class="normal ui-icon-circle ui-btn-icon-notext">Normal</label>
                            <input id="normal" type="radio" name="priority" value="1" checked>
                            <label for="high" class="high ui-icon-arrow-u ui-btn-icon-notext">High</label>
                            <input id="high" type="radio" name="priority" value="2">
                        </div>
                    </td>
                    <td class="add-btn">
                        <button id="addFastTask" data-role="button" data-icon="plus" data-iconpos="notext">add</button>
                    </td>
                </tr>
                </tbody>
            </table>


            <div data-role="fieldcontain">

                <table class="full task-list">
                    <thead>
                        <tr>
                            <th></th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-item-id="T1">
                            <th>
                                <div class="list-item task priority-2">
                                    <input id="T1" type="checkbox">
                                    <label for="T1">Task 1 Task 1 Task 1 Task 1</label>
                                </div>
                            </th>
                            <td>
                                <div data-role="controlgroup" data-type="horizontal">
                                    <button class="custom" data-role="button" data-icon="edit" data-iconpos="notext">edit</button><button class="custom" data-role="button" data-icon="delete" data-iconpos="notext">delete</button>
                                </div>
                            </td>
                        </tr>
                        <tr data-item-id="T2">
                            <th>
                                <div class="list-item list priority-1">
                                    <input id="T2" type="checkbox">
                                    <label for="T2">List 2 List 2 List 2</label>
                                </div>
                            </th>
                            <td>
                                <div data-role="controlgroup" data-type="horizontal">
                                    <button class="custom" data-role="button" data-icon="edit" data-iconpos="notext">edit</button><button class="custom" data-role="button" data-icon="delete" data-iconpos="notext">delete</button>
                                </div>
                            </td>
                        </tr>
                        <tr data-item-id="T2">
                            <th>
                                <div class="list-item list priority-1">
                                    <input id="T3" type="checkbox">
                                    <label for="T3">List 2 List 2 List 2</label>
                                </div>
                            </th>
                            <td>
                                <div data-role="controlgroup" data-type="horizontal">
                                    <button class="custom" data-role="button" data-icon="edit" data-iconpos="notext">edit</button><button class="custom" data-role="button" data-icon="delete" data-iconpos="notext">delete</button>
                                </div>
                            </td>
                        </tr>
                        <tr data-item-id="T2">
                            <th>
                                <div class="list-item list priority-0">
                                    <input id="T4" type="checkbox">
                                    <label for="T4">List 2 List 2 List 2</label>
                                </div>
                            </th>
                            <td>
                                <div data-role="controlgroup" data-type="horizontal">
                                    <button class="custom" data-role="button" data-icon="edit" data-iconpos="notext">edit</button><button class="custom" data-role="button" data-icon="delete" data-iconpos="notext">delete</button>
                                </div>
                            </td>
                        </tr>
                        <tr data-item-id="T2">
                            <th>
                                <div class="list-item list priority-1">
                                    <input id="T5" type="checkbox">
                                    <label for="T5">List 2 List 2 List 2</label>
                                </div>
                            </th>
                            <td>
                                <div data-role="controlgroup" data-type="horizontal">
                                    <button class="custom" data-role="button" data-icon="edit" data-iconpos="notext">edit</button><button class="custom" data-role="button" data-icon="delete" data-iconpos="notext">delete</button>
                                </div>
                            </td>
                        </tr>
                        <tr data-item-id="T2">
                            <th>
                                <div class="list-item list priority-2">
                                    <input id="T6" type="checkbox">
                                    <label for="T6">List 2 List 2 List 2</label>
                                </div>
                            </th>
                            <td>
                                <div data-role="controlgroup" data-type="horizontal">
                                    <button class="custom" data-role="button" data-icon="edit" data-iconpos="notext">edit</button><button class="custom" data-role="button" data-icon="delete" data-iconpos="notext">delete</button>
                                </div>
                            </td>
                        </tr>
                        <tr data-item-id="T2">
                            <th>
                                <div class="list-item list priority-1">
                                    <input id="T7" type="checkbox">
                                    <label for="T7">List 2 List 2 List 2</label>
                                </div>
                            </th>
                            <td>
                                <div data-role="controlgroup" data-type="horizontal">
                                    <button class="custom" data-role="button" data-icon="edit" data-iconpos="notext">edit</button><button class="custom" data-role="button" data-icon="delete" data-iconpos="notext">delete</button>
                                </div>
                            </td>
                        </tr>
                        <tr data-item-id="T2">
                            <th>
                                <div class="list-item list priority-0">
                                    <input id="T8" type="checkbox">
                                    <label for="T8">List 2 List 2 List 2</label>
                                </div>
                            </th>
                            <td>
                                <div data-role="controlgroup" data-type="horizontal">
                                    <button class="custom" data-role="button" data-icon="edit" data-iconpos="notext">edit</button><button class="custom" data-role="button" data-icon="delete" data-iconpos="notext">delete</button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </div>
        <div data-role="footer" data-position="fixed">
            <table class="full">
                <tbody>
                    <tr>
                        <td>
                            <button id="addList" class="btn-left" data-role="button" data-icon="plus">New list</button>
                        </td>
                        <td>
                            <div id="searchModule">
                                <input type="text" placeholder="Search...">
                            </div>
                        </td>
                        <td>
                            <button id="addTask" class="btn-right" data-role="button" data-icon="plus" data-iconpos="right">New task</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

<script>
    function fixTaskList() {
        var $table = $('table.task-list'),
            th = $table.find('th:first'),
            width = th.width();
        $table.addClass('fixed');
        th.css('width', width);
        $table.find('.list-item label').addClass('nowrap');
    }

    function disableListItems() {
        $('.task-list .list-item.list input').prop('disabled', true);
    }

    function fixFooterTable() {
        var $table = $('.ui-footer table');
        var $btns = [
            $table.find('#addList'),
            $table.find('#addTask')
        ];
        var btnWidths = [
            $btns[0].outerWidth() + 10,  // (button css value for "left") * 2
            $btns[1].outerWidth() + 10
        ];

        $btns[0].parents('td').css('width', btnWidths[0]);
        $btns[1].parents('td').css('width', btnWidths[1]);
    }

    setTimeout(function() {
        fixTaskList();
        disableListItems();
        fixFooterTable();
    }, 1000);


    // Examples how to programmatically (un)check checkboxes
    function checkList() {
        $('.task-list .list-item.list input').prop('checked', true).checkboxradio('refresh')
    }
    function uncheckList() {
        $('.task-list .list-item.list input').prop('checked', false).checkboxradio('refresh')
    }
</script>
</body>
</html>
